<HTML>
<HEAD>
<TITLE>Geological model</TITLE>
</HEAD>
<BODY BACKGROUND="images/graybg.gif" BGCOLOR="GRAY", TEXT="BLACK",
LINK="BLUE", ALINK="GREEN", VLINK="RED">
<H3><CENTER>Описание геологической модели</CENTER></H3>
Геологическая модель месторождения представляет собой набор трёхмерных матриц с 
распределением различных физических свойств. Как правило, присутствуют распределения
начальной нефтегазонасыщенности, проницаемости, пористости и коэффициента самопроизвольной
поляризации. Если проведено гидродинамическое моделирование, присутствует четырёхмерный
массив с распределением текущей нефтегазонасыщенности во времени. Технически, трёхмерные
матрицы строятся как стопка карт на основе базы данных, прадставленной в формате Геопак
по скважинам со строго вертикальной траекторией ствола. Каждая карта строится на одной
и той же равномерной сетке с использованием геостатистических возможностей программы
Surfer (Golden Software). Геометрически, каждая карта отстоит от соседней на расстояние
равное разрешающей способности геофизических методов, в основании лежит всё та же 
равномерная сетка и верхняя грань трёхмерного тела выравнена по поверхности, проходящей
через кровлю самого верхнего из набора геологических объектов, для которых строится
модель.

<P>
Ввиду большого объёма данных, геологическая модель хранится в виде массивов в фале формата
HDF. Файлы формата HDF организованы в виде иерархической структуры содержащей два основных
структурных элемента: группы и наборы данных. Группы представляют собой набор, содержащий
ноль или больше групп или наборов данных вместе с сопутствующей информацией. Набор данных
представляет собой многомерный массив элементов с сопутствующей информацией. Сопутствующей
информацией являются метаданные, или, как говорят, данные о данных, и содержат скалярные
величины, текстовые строки или небольшие массивы. Работа с группами и членами групп во
многом схожа с манипуляцией над директориями и файлами операционной системы. Подобно
директориям и файлам, объекты в файле формата HDF описываются путём задания полного 
(абсолютного) пути, непример
<UL>
  <LI> / обозначает корень группы
  <LI> /foo обозначает элемент корневой группы с названием foo
  <LI> /foo/bar обозначает член группы foo, которая, в свою очередь, 
    является членом корневой группы
</UL>
Наборы данных хранятся в форме заголовка и массива данных. Заголовок содержит информацию,
необходимую для интерпретации любой части набора данных, а также метаданные, описывающие и
комментирующие информацию. Информация, содержащаяся в заголовке, задаёт имя объекта, его
размерность, типизацию чисел, где и как расположены данные на диске и другую информацию,
используемую программным обеспечением для уменьшения времени доступа и поддержания целостности
данных.

<P>
Каждый HDF файл, распространяемый с программой Field, содержит по крайней мере один вариант
геологической модели, находящийся в разделе
<P>
<CENTER>
/model/&ltуникальное-имя-модели&gt,
</CENTER>
<P>
который служит базовой группой для всех данных модели. В корне этой группы записаны атрибуты
cx, cy, cz, задающие размерность хранимой модели. Размерность всех массивов, принадлежащих 
этой модели должна быть согласоавна с этими величинами. Геометрия модели задана на равномерной
прямоугольной сетке, выравненой по кровле верхнего геологического объекта. Кровля такого объекта
представлена двумерным массивом elev действтельных чисел и имеет атрибуns x1, x2, y1, y2, z1, z2,
задающие габариты модели в метрах. Трёхмерных массивы, входящих в базовую группу модели,
трактуются как статические свойства резервуара. К таким статическим свойствам относятся,
как правило, распределение пористости (poro), распределение проницаемости (perm), коэффициент 
самопроизвольной поляризации и т.д. При загрузке программа строит список таких атрибутов для
того, чтобы работать с ними унифицированным образом. Каждый набор данных сопровождает некоторое 
число атрибутов, как приведено в следующей таблице, рекомендованной фирмой Unidata:

<P>
<TABLE BORDER=1>
  <TR VALIGN=TOP>
    <TD><P> <CODE>units</CODE></P></TD>
    <TD><P> 
  Алфовитно-цифровая строка, которая задаёт единицы измерения, 
  используемые для набора данных. 
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>long_name</CODE></P></TD>
    <TD><P> 
    Длинное описательное название. Оно может быть использовано, например, для подстановки
    подписи под автоматически построенным изображением. Если массив не имеет атрибута 
    <CODE>long_name</CODE>, по умолчанию используется имя набора данных. 
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>valid_min</CODE></P></TD>
    <TD><P> Скаляр, задающий минимально возможное значение в данном массиве
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>valid_max</CODE></P></TD>
    <TD><P> Скаляр, задающий максимально возможное значение в данном массиве
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>valid_range</CODE></P></TD>
    <TD><P>Вектор из двух чисел, задающих максимально и минимально возможные значения для
    этого массива. Эквивалентно заданию обоих атрибутов <CODE>valid_min</CODE> и 
    <CODE>valid_max</CODE>. Любой из этих атрибутов определяет <I>valid range</I>. 
    Атрибут <CODE>valid_range</CODE> не должен быть задан, если определён либо 
    <CODE>valid_min</CODE> либо <CODE>valid_max</CODE>. 
    </P><P>
    Приложение должно трактовать значения, лежащие вне диапозона <I>valid range</I> 
    как пропуск данных. Тип данных каждого из атрибутов <CODE>valid_range</CODE>, 
    <CODE>valid_min</CODE> и <CODE>valid_max</CODE> должен совпадать с типом данных,
    хранящихся в массиве (за исключением данных с типом, эквивалентным беззнаковому
    целому восьмибитовому значению, в этом случае область значений массивов может
    быть задана знаковым целочисленным типом, достаточным для представления данных)
    </P><P>
    Если никакой из атрибутов <CODE>valid_min</CODE>, <CODE>valid_max</CODE> или 
    <CODE>valid_range</CODE> не задан, приложение должно вычислить область значений
    следующим образом. Если данные представлены беззнаковым восьмибитовым целым
    числом, и атрибут <CODE>_FillValue</CODE> не определён явно, тогда диапозон должен 
    включать в себя все возможные значения. Иначе, из диапозона значений следует исключить
    значение <CODE>_FillValue</CODE> (заданного явно или по умолчанию) следующим образом. 
    Если <CODE>_FillValue</CODE> положительное, тогда оно задаёт максимально возможное 
    значение, иначе оно задаёт минимально возможное значение. Для целочисленного типа
    разность между значением <CODE>_FillValue</CODE> и миннимально или максимально возможным 
    значением должна быть равна 1. Для действительных чисел разность должна быть не
    меньше чем удвоенная минимально возможная разность для данного типа данных, 
    чтобы учесть возможные ошибки округления.
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>scale_factor</CODE></P></TD>
    <TD><P> Если этот атрибут присутствует, данные должны быть умножены на это число
    после считывания в приложении, которое осуществляет доступ к данным.
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>add_offset</CODE></P></TD>
    <TD><P> Если  этот атрибут присутствует, это число должно быть прибавлено к данным
    после их загрузки. Если заданы оба атрибута <CODE>scale_factor</CODE> и 
    <CODE>add_offset</CODE>, данные сначала масштабируются, а потом смещаются.
    Атрибуты <CODE>scale_factor</CODE> и <CODE>add_offset</CODE> иогут быть задействованы
    совместно, чтобы предоставить простейшую возможность компрессии данных путём уменьшения 
    разрядности при представлении чисел с плавающей точкой каким-либо целочисленным типом.
    Когда масштабированное число записывается в файл, приложение должно сначала вычесть
    смещение и рзультат разделить на масштабирующий множитель.
    </P><P>
    Когда <CODE>scale_factor</CODE> и <CODE>add_offset</CODE> используются для упаковки
    данных, соответствующий массив (содержащий упакованные данные) имеет как прачило
    одно- или двухбайтные элементы, в то время как реальные данные представлены
    действительными числами с одинарной или двойной точностью. Атрибуты <CODE>scale_factor</CODE> 
    и <CODE>add_offset</CODE> должны быть того же типа, что и распакованные данные.
    </P></TD>
  </TR>
    <TR VALIGN=TOP><TD><P> <CODE>_FillValue</CODE></P></TD>
    <TD><P> Атрибут <CODE>_FillValue</CODE> задаёт <I>заполняющее значение</I>, 
    используемое для инициализации пространства на диске, выделенного под массив. 
    Если атрибут <CODE>_FillValue</CODE> задан, тогда это должен быть скаляр того
    же типа, что и элементы массива. 
    </P><P>
    Приложению часто нужно записать значение, представляющее неопределённое или 
    пропущенное данное. <I>Заполняющее значение</I> предоставляет адекватную
    величину для этой цели, потому что она лежит как правило за пределами диапозона
    <I>valid range</I> и поэтому рассматривается как пропущенные данные приложениями,
    соответствующими этим соглашениям. Значение <I>fill value</I>, лежащее внутри диапозона
    <I>valid range</I> можно использовать, хотя это и не рекомендуется. 
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>missing_value</CODE></P></TD>
    <TD><P> Атрибут <CODE>missing_value</CODE> может быть скалярной или векторной величиной	
    содержащей значения для пропущенных данных. Все эти значения должны лежать вне
    диапозона <I>valid range</I> так, чтобы приложение, следующее этим соглашениям
    могло трактовать данные как пропущенные.
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>C_format</CODE></P></TD>
    <TD><P> Форматная строка, которая должна быть использована приложениями, написанными
    на языке C для печати значений данного массива. Например, если известно, что элементы
    массива представлены тремя значащими цифрами, атрибут <CODE>C_format</CODE> должен быть
    задан как <CODE>&quot;%.3g&quot;</CODE>. Эта форматная строка применяется к масштабированному
    (внутреннему) представлению, вне зависимости от того, присутствует ли атрибут
    <CODE>scale_factor</CODE> или <CODE>add_offset</CODE>.
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>FORTRAN_format</CODE></P></TD>
    <TD><P> Форматная строка, используемая приложениями, написанными на языке FORTRAN
    для вечати значений данного массива. Например, если известно, что элементы массива 
    представлены тремя значащими цифрами, атрибут <CODE>FORTRAN_format</CODE> должен быть
    задан как <CODE>&quot;(G10.3)&quot;</CODE>. 
    </P></TD>
  </TR>
  <TR VALIGN=TOP>
    <TD><P> <CODE>title</CODE></P></TD>
    <TD><P> Глобальный атрибут, содержащий строку с кратким описанием информации,
    содержащейся представленной данным массивомю
    </P></TD>
  </TR>
</TABLE>
<p><b>Таб.4-1.</b><i> Атрибуты набора данных.</i>

<P>
Кроме этого, в базовой группе могут присутствовать четырёхмерные массивы, которые трактуются
как динамические саойства резервуара. Например, изменение нефтенасыщенности (soil) со временем
может быть представлено в виде четырёхмерного массива. Таким массивам должен быть присвоен
атрибут time, представляющий собой вектор, содержащий временные отметки.

<P>
Для выделенных геологических объектом могут присутствовать наборы данных, описыпающие 
простирание этих объектов в объёме модели. Геологические объекты (пласты) описываются парой
поверхностей, одна из которых выравнена по кровле модели, а другая представляет собой
карту толщин. Эла информация содержится в группе formation, которая входит в состав
базовой группы модели.

<P>
<ADDRESS> Created by Alexander Chupeev<BR>
Created on 17 April 2004</ADDRESS>
</BODY>
</HTML>
