<HTML>
<HEAD>
<TITLE>User Interface</TITLE>

<SCRIPT LANGUAGE="JavaScript"><!-- 
function fullsize(sURL)
{
  window.open(sURL,'scrshot','width=500,height=375,top=20,left=20,directories=no , Toolbar = no, resizable = yes, menubar = no, ScrollBars = yes ');
}
--></SCRIPT>

</HEAD>

<BODY BACKGROUND="images/graybg.gif" BGCOLOR="GRAY", TEXT="BLACK",
LINK="BLUE", ALINK="GREEN", VLINK="RED">

<H3><CENTER>Ползовательский интерфейс</CENTER></H3>
Основное окно программы содержит рабочую область и два вспомогательных окна -- навигационную
панель и обзорную карту. Из меню View можно вызвать несколько дополнительных окон, которые
будут влиять на логику работы программы, переключая различные режимы. Имеются режимы 
построения вертикального разреза (Cross-Section), вывода цифрового содержимого модели
(Cell Probe), режим отображения насыщенности в соответствии с трёхфазной диаграммой 
(Cumulative S), диалог для подсчёта запасов месторождения (Resources), усовершенствованный
диалог для расчёта интегральных характеристик (Integral Props, рекомендуется для использования
вместо диалога Resources), окно для работы с фондом скважин (Find Well) и окно для 
автоматического построения структурной модели месторождения (Well Match).

<p>
&nbsp;<p><a href="javascript:fullsize('mainframe.html')"><img src="images/mainframe.jpg" width=640 height=480 border=0 ALT="Увеличить"></a><A HREF="javascript:fullsize(`mainframe.html')"> 
</A>
<p><b>Рис 2-1.</b> <i>Основное окно приложения Field</i>

<P>
<A HREF="#FieldView">Рабочая область</A><BR>
<A HREF="#FieldForm">Панель навигации</A><BR>
<A HREF="#OverView">Обзорное окно</A><BR>

<A NAME=FieldView><H4>Рабочая область</H4></A>
<P>Рабочая область является основным элементом, с помощью котокого программа взаимодействует 
с пользователем. В ней отображена карта участка месторождения, с которой работает инженер в 
каждый конкретный момент времени. Имеется три режима отображения карты: контурная карта, 
билинейная интерполяция свойств и отображение ячейки в соответствии таблицей, сопоставляющей 
данные и цвет (color-to-data mapping). Графическое представление этой таблицы расположено с 
правой стороны рабочей области. В левом нижнем углу располагается шкала, показывающая масштаб
карты. В текущей реализации все карты строятся в масштабе 1:15000 (в одном сантиметре сто
пятьдесят метров). На карте обозначены места расположения скважин с автоматическим выбором
оптимального расположения номеров скважин. Есть три режима оторажения сетки на которой 
построена геологическая модель месторождения. Первый, когда координатные линии проводятся 
через центр ячеек. Второй, когда координатные линии ограничивают ячейки. Третий, когда 
отображение координатной сетки отключено. У левой и верхней кромки окна имеются подписи
к координатным линиям, обозначающие номер каждой ячейки. Отображением всех элементов
пользовательского интерфейса можно управлять из контекстно-зависимого меню, которое строится
динамически при нажатии правой кнопки манипулятора мышь над рабочей областью. Содержимое
меню зависит от того, какие объекты лежат непосредственно под курсором мыши. Пункт меню 
по умолчанию вызывает диало для настройкирежима отображения рабочей области. Другие пункты
меню управляют отображением вспомогательных окон для палитры и масштаба. Если нажатие
кнопки происходит над скважиной, имеется пункт меню для генерации таблицы Excel с отчётом
об интерпретации ГИС для этой скважины.
<P>
<img src="images/colortable.jpg" align=left border=0 width=285 height=530 
ALT="Таблица отображения цвета" hspace=20 vspace=20> 
<img src="images/colordialog.jpg" width=453 height=353 
ALT="Редактор элемента таблицы" hspace=20 vspace=20>
<p><b>Рис 2-2.</b> <i>Диалоговая панель редактирования цветового отображения</i>
<P>
При нажатии правой кнопки манипулятора мышь над областью, занятой окном палитры, 
отображающей значения скалярного поля в цвет, всплывает диалоговое окно для редактирования 
таблицы отображения. С помощью кнопок, расположенных в левом верхнем углу диалоговой панели
осуществляется доступ к функциям записи и считывания содержимого таблицы, а также 
к функциям добавления и удаления отдельного элемента таблицы. Однократный щелчёк над цифровым 
предcтавлением элемента (колонка с именем value) приводит к появлению поля редактирования, 
которое позволяет задать новое значение для этого элемента таблицы. Аналогично, двойной 
щелчёк над цветовым представлением данных (колонка с именем color) вызввает стандартный 
диалог редактирования цвета операционной системы Windows, в который добавлена возможность 
для ввода действительного числа для задания соответствия цвету. По умолчанию, между отдельными
элементами таблицы осуществляется линейная интерполяция, но имеется возможность задать
отображение цвета по логарифмическому закону, указав для какого-либо свойства признак
colormapping=1 в файле данных. При запуске программы для всех свойств резервуара устанавливается
цветовая палитра, заданная по умолчанию, и чтобы быстро вернуться к ранее отредактированному
набору цветов, осуществляется загрузка из файла. Для долговременного хранения цветовой информации
выбран формат .cpt, позаимствованный из пакета программ GMT (generic mapping tools), находящегося
в свободном распространении. В этом пакете поставляется набор стандартных таблиц, используемых
в океанографии, сейсмике, топографии и т.д. и удобные программы для манипуляции с этими 
таблицами. Файл *.cpt имеет следующий формат:<BR>

<P>
<DIV ALIGN="CENTER">
<TABLE CELLPADDING=3>
<TR><TD ALIGN="LEFT">z<SMALL><SUB>0</SUB></SMALL></TD>
<TD ALIGN="LEFT">R<SMALL><SUB>min</SUB></SMALL></TD>
<TD ALIGN="LEFT">G<SMALL><SUB>min</SUB></SMALL></TD>
<TD ALIGN="LEFT">B<SMALL><SUB>min</SUB></SMALL></TD>
<TD ALIGN="LEFT">z<SMALL><SUB>1</SUB></SMALL></TD>
<TD ALIGN="LEFT">R<SMALL><SUB>max</SUB></SMALL></TD>
<TD ALIGN="LEFT">G<SMALL><SUB>max</SUB></SMALL></TD>
<TD ALIGN="LEFT">B<SMALL><SUB>max</SUB></SMALL></TD>
<TD ALIGN="LEFT">[<B>A</B>]</TD>
</TR>
<TR><TD ALIGN="LEFT">...</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
</TR>
<TR><TD ALIGN="LEFT">z<SMALL><SUB>n-2</SUB></SMALL></TD>
<TD ALIGN="LEFT">R<SMALL><SUB>min</SUB></SMALL></TD>
<TD ALIGN="LEFT">G<SMALL><SUB>min</SUB></SMALL></TD>
<TD ALIGN="LEFT">B<SMALL><SUB>min</SUB></SMALL></TD>
<TD ALIGN="LEFT">z<SMALL><SUB>n-1</SUB></SMALL></TD>
<TD ALIGN="LEFT">R<SMALL><SUB>max</SUB></SMALL></TD>
<TD ALIGN="LEFT">G<SMALL><SUB>max</SUB></SMALL></TD>
<TD ALIGN="LEFT">B<SMALL><SUB>max</SUB></SMALL></TD>
<TD ALIGN="LEFT">[<B>A</B>]</TD>
</TR>
</TABLE>
</DIV>

<P>
Такой формат позволяет задать как постоянный цвет для каждого уровня, так и плавное изменение
цвета между соседними уровнями. Имеется несколлько режимов отображения ячеек в рабочей области:

<P>
<a href="javascript:fullsize('type1.html')">
<img src="images/type1.jpg" border=0 width=200 height=200 
ALT="Увеличить" hspace=5 vspace=5> 
</a>
<a href="javascript:fullsize('type2.html')">
<img src="images/type2.jpg" border=0 width=200 height=200 
ALT="Увеличить" hspace=5 vspace=5> 
</a>
<a href="javascript:fullsize('type3.html')">
<img src="images/type3.jpg" border=0 width=200 height=200 
ALT="Увеличить" hspace=5 vspace=5> 
</a>
<p><b>Рис.2-3..2-5.</b><i>Режимы отображения ячеек.</i>

<P>
Переключить режимы отображения можно в диалоге настройки режимов, всплывает в ответ на команду
Properties (Свойства) из контекстно-зависимого меню в рабочей области. На другой вкладке
диалога находятся переключатели, которые управляют режимами отображения сетки модели.

<P>
<img src="images/fieldview.jpg" border=0 width=401 height=196
ALT="Настройка рабочей области" hspace=20 vspace=20> 
<P>
<p><b>Рис.2-6.</b><i>Настройка рабочей области.</i>

<A NAME=FieldForm><H4>Панель навигации</H4></A>
<P>
Панель навигации предназначена для выбора даты, на которую отображается состояние модели. На
этой панели имеются списки нагнетательных и добывающих скважин, в которых отображаются дебиты
на данную дату. Списки отсортированы по имени скважины, чтобы было удобно производить 
интерактивный поиск какой-то конкретной скважины. При двойном щелчке мыши над строчкой с
именем заданной сквжины, центр рабочей области переносится в точку с координатами пересечения
ствола скважины с кровлей модели. Аналогично, при двойном щелчке над значком скважины в 
рабочей области список в навигационной панели прокручивается таким образом, чтобы высветить
строчку с информацией по данной скважине. Значок скважины также зависит от режима работы,
используются:
<P><IMG SRC="images/new-6.png" ALIGN=MIDDLE> для добывающих скважин<BR>
<P><IMG SRC="images/new-8.png" ALIGN=MIDDLE> для нагнетательных скважин<BR>
<p><b>Рис.2-7.</b><i>Типы скважин.</i>
<P>
В правой части панели управления имеется движок, с помощью которого можно выбрать определённый 
слой сетки. Если в исходных данных присутствуют массивы нефтенасыщенности (soil) и 
газонасыщенности (sgas), имеется возможность переключиться в режим отображения насыщенности 
согласно тройной диаграмме (пункт CumulativeS меню View). Для переключения отображения 
различных физических свойств из базы данных имеется комбинированный список в верхнем углу
панели управления.

<A NAME=OverView><H4>Обзорное окно</H4></A>

<P>
Обзорное окно служит для бысрого перемещения по карте месторождения. Рабочая область выделена
в виде объёмного прямоугольника. Удержирая левую кнопку мыши в нажатом положении над этим
прямоугольником, можно быстро переместить рабочую область в нужную часть карты. При двойном
щелчке левой кнопки мыши над обзорной картой центр рабочей области переносится в указанную
точку. Перемещение ребочей области по карте также можно управлять с помощью движков прокрутки.

<P>
<ADDRESS> Created by Alexander Chupeev<BR>
Created on 18 April 2004</ADDRESS>
</BODY>
</HTML>
